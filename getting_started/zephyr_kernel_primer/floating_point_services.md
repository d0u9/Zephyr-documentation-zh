# 浮点服务

> Note：浮点服务目前仅对基于Intel X86架构的平台可用。

## 概念

Zephyr的内核允许应用的任务或线在支持浮点寄存器的板卡配置上使用浮点寄存器。使用X87 FPU/MMX寄存器的线程被称为“FPU用户”，使用SSE寄存器的线程被称为"SSE用户"。

> Note：内核不支持在ISR中使用浮点寄存器。

内核能够被配置为仅为需要浮点服务的应用提供浮点服务。下面介绍了三种支持的操作模式。此外，内核对SSE寄存器的支持能够根据需要被包含或被省略。

### 无FP寄存器模式

当应用不包含使用浮点寄存器的任务或线时采用这种模式。该模式是内核默认的浮点服务模式。

如果任务或线使用了任何的浮点寄存器，内核会产生致命错误状态并且终止该线程。

### 非共享FP寄存器模式

当应用仅包含一个需要使用浮点寄存器的任务或线的时候使用这种模式。

内核初始化浮点寄存器使得他们能够被任何的任务或线使用。无论发生任何种类的上下文切换，浮点寄存器内容保持不变。

> Note：如果两个或多个任务或线使用浮点寄存器时，可能会导致不正确的结果。内核不会尝试检测（或阻止）多个线程对这些浮点寄存器的使用。

### 共享FP寄存器模式



