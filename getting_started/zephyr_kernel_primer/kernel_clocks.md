# 内核时钟

## 相关概念

内核支持两种不同的时钟。

- 一个64位的系统时钟（system clock），它是内核中基于时间的相关服务的基础。该时钟是一个计数器用以对滴答数（ticks）计数，并且以应用确定的频率递增。

内核允许通过直接访问定时器来访问该时钟。它同样能够通过使用内核定时器或超时功能来间接访问。

- 一个32位的硬件时钟（hardware clock），它作为系统时钟滴答的来源。该时钟是一个计数器，其计数单位并没有指定（称为周期（cycles）），并且以soc硬件的设定频率来递增。

内核允许通过读取定时器来直接访问该时钟。

内核也提供了许多不同的方法将时钟使用的时间单位转换成标准时间单位（例如：秒，微秒，毫秒等），在不同的两种类型时间单位之间转换。

## 目的

当基于时间的处理不需要较高精度的情况时，使用系统时钟，例如实现时间限制或时间延迟。

当基于时间的处理需要比系统时钟更高精度的情况时，使用硬件时钟，例如高精度时间测量。

> Note：硬件时钟的高频率，计数器的32位限制，意味着当使用高精度时钟对一段时间进行度量时，时钟计数器的回转情况必须被考虑到。

## 使用方法

### 配置内核时钟

使用`SYS_CLOCK_TICKS_PER_SEC`配置选项来指定每秒的滴答数。将该值设置为0会禁用所有的系统时钟和硬件时钟。

> Note：使用更高的系统时钟频率额允许系统时钟提供颗粒更细的时间，但是也同样增加了内核处理滴答数的工作量（由于它们出现的更加频繁）。


